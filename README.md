# Study Focus Guard (勉強脱線防止拡張機能)

勉強中にYouTubeなどの誘惑に負けないためのChrome拡張機能です。
閲覧中のページが「勉強に関連しているか」をAIがリアルタイムで判定し、無関係なコンテンツには警告を表示します。YouTube Shortsは強制的にブロックされます。

## ✨ 機能

- **AIによる関連性判定**:
  - 登録した勉強内容（例: "Programming", "Math"）と閲覧中のページタイトルの意味的な関連性を判定。
  - **Transformers.js (MiniLM-L12)** を使用し、ブラウザ内で完結するローカル推論（プライバシー重視）。
  - 学習系コンテンツ（YouTubeの教育カテゴリなど）はスコア優遇。

- **脱線防止機能**:
  - **警告オーバーレイ**: 類似度が低い場合、"🥺" キャラクターと共に「勉強に関係ありますか？」と警告。
  - **Shortsブロック**: 時間泥棒になりやすいYouTube Shortsは、URLを開いた瞬間に完全ブロック。

- **デバッグモード**:
  - 画面右下に現在の「類似度スコア」を常時表示し、判定基準を可視化。

## 🚀 インストール方法

この拡張機能はストア公開されていないため、開発者モードで読み込みます。

1. このリポジトリをZIPでダウンロードし、解凍します。
   - または `git clone` します。
2. Chromeを開き、アドレスバーに `chrome://extensions/` と入力します。
3. 右上の **「デベロッパー モード」** をONにします。
4. **「パッケージ化されていない拡張機能を読み込む」** をクリックします。
5. 解凍したフォルダ（`manifest.json` があるフォルダ）を選択します。

## 📖 使い方

1. **勉強内容を登録する**:
   - 拡張機能のアイコンをクリックし、ポップアップを開きます。
   - 勉強するトピックを入力して「Save」します（例: `English`, `React`, `Linear Algebra`）。
   - ※ 日本語も対応していますが、英語の方が精度が良い場合があります。

2. **勉強を始める**:
   - YouTubeやWebページを閲覧します。
   - 勉強と無関係なページを開くと、画面が警告で覆われます。
   - 本当に勉強に必要な場合は「関係ある（閉じる）」を押して続行できます。

## 🛠 技術的な仕組み

- **Embedding Model**: `Xenova/paraphrase-multilingual-MiniLM-L12-v2` (約20MB)
- **Architecture**:
  - `content.js`: ページ情報の取得、DOM操作（オーバーレイ表示）。
  - `background.js`: オフスクリーンAPIの制御。
  - `offscreen.js` & `sandbox.js`: AIモデルの実行環境（Wasm制約の回避）。
